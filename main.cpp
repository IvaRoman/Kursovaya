/**
 * \file main.cpp
 * \brief Точка входа серверного приложения
 * 
 * Содержит функцию main(), которая создает и запускает сервер
 * с параметрами, переданными через командную строку.
 * 
 * \author Иванов Роман
 * \date 08.12.2025
 * 
 * \par Использование:
 * \code{.sh}
 * ./server <файл_пользователей> <файл_лога> <порт>
 * ./server users.bd server.log 33333
 * \endcode
 * 
 * \par Пример файла users.bd:
 * \code
 * alice:Royal
 * bob:Password123
 * \endcode
 */

#include "server.h"
#include <iostream>

/**
 * \brief Точка входа в программу
 * 
 * Создает и запускает сервер с переданными параметрами.
 * 
 * \param[in] argc Количество аргументов командной строки
 * \param[in] argv Массив аргументов командной строки
 * \return 0 при успешном завершении, 1 при ошибке
 * 
 * \par Параметры командной строки:
 * 1. Файл с пользователями (формат: логин:пароль)
 * 2. Файл для записи логов
 * 3. Порт для прослушивания (1-65535)
 * 
 * \par Пример использования:
 * \code{.sh}
 * ./server users.txt server.log 33333
 * \endcode
 * 
 * \par Коды возврата:
 * - 0: успешное завершение
 * - 1: ошибка инициализации сервера
 */
int main(int argc, char* argv[]) {
    // БЛОК: СОЗДАНИЕ И ИНИЦИАЛИЗАЦИЯ СЕРВЕРА
    Server server;
    
    if (!server.initialize(argc, argv)) {
        return 1;  // Завершение с ошибкой если инициализация не удалась
    }
    
    // БЛОК: ЗАПУСК ОСНОВНОГО ЦИКЛА СЕРВЕРА
    server.run();
    
    return 0;
}